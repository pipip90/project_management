{% extends "base.html" %}
{% block content %}
<h2>Мои проекты</h2>
<a href="{{ url_for('add_project') }}" class="button">Добавить проект</a>

<div>
    <h3>Отправить проект учителю</h3>
    <form action="{{ url_for('submit_project') }}" method="POST">
        <label for="teacher">Выберите учителя:</label>
        <select name="teacher_login" id="teacher">
            {% for teacher in teachers %}
                <option value="{{ teacher.login }}">{{ teacher.name }} ({{ teacher.login }})</option>
            {% endfor %}
        </select>
        <input type="hidden" name="project_id" value="{{ project.id }}">
        <button type="submit" class="button">Отправить проект</button>
    </form>
</div>

{% if project_info %}
<ul>
    {% for project, submission in project_info %}
    <li>
        <h3>{{ project.title }}</h3>
        <p>{{ project.description }}</p>
        <p>Дедлайн: {{ project.deadline }}</p>
        {% if project.file_path %}
            <p>Файл: <a href="{{ url_for('uploaded_file', filename=project.file_path) }}">Скачать DOCX</a></p>
        {% else %}
            <p>Файл не загружен</p>
        {% endif %}
        {% if submission %}
            <p>Оценка: {{ submission.grade }}</p>
            <p>Статус: {{ submission.status }}</p>
            <p>Комментарий: {{ submission.comment }}</p>
        {% else %}
            <p>Проект ещё не проверен</p>
        {% endif %}
    </li>
    {% endfor %}
</ul>
{% else %}
<p>Вы ещё не добавили ни одного проекта.</p>
{% endif %}
{% endblock %}
